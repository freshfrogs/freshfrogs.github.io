<!doctype html>
<html lang="en" data-theme="atlas">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fresh Frogs ‚Äî Rarity explorer</title>

  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body class="ff-body">
  <div class="ff-site">
    <header class="ff-masthead">
      <div class="ff-container ff-masthead__inner">
        <a class="ff-logo" href="index.html"><span>üê∏</span>Fresh Frogs</a>
        <nav class="ff-nav" aria-label="Primary">
          <a href="collection.html">Collection</a>
          <a href="rarity.html" aria-current="page">Rarity</a>
          <a href="pond.html">Pond</a>
          <a href="mutate.html">Mutate</a>
        </nav>
        <a class="ff-button ff-button--ghost" href="pond.html">View pond</a>
      </div>
    </header>

    <main class="ff-main">
      <section class="ff-page-hero">
        <div class="ff-container ff-page-hero__inner">
          <div>
            <span class="ff-eyebrow">Rarity explorer</span>
            <h1 class="ff-page-hero__title">Discover legendary frogs and hidden traits</h1>
            <p class="ff-page-hero__lead">
              Filter, sort, and search the entire Fresh Frogs collection. Every card includes live owner data, staking status,
              and layered artwork rendered directly from the metadata order.
            </p>
            <div class="ff-page-hero__meta">
              <span class="ff-pill">Live rarity updates</span>
              <span class="ff-pill">Accurate staking info</span>
              <span class="ff-pill">10 visual themes</span>
            </div>
          </div>
          <div class="ff-hero__media">
            <div class="ff-card-stack">
              <div class="ff-card-stack__layer" data-layer="1">
                <img data-rarity-frog="1" src="frog/88.png" alt="Frog 88" />
                <p class="ff-card-stack__label">Flip between rarity themes to preview foil-inspired card treatments.</p>
              </div>
              <div class="ff-card-stack__layer" data-layer="2">
                <img data-rarity-frog="2" src="frog/144.png" alt="Frog 144" />
              </div>
              <div class="ff-card-stack__layer" data-layer="3">
                <img data-rarity-frog="3" src="frog/321.png" alt="Frog 321" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="ff-container" id="ffTopbarMount"></div>

      <section class="ff-page-content">
        <div class="ff-container">
          <div class="ff-page-grid">
            <section class="ff-panel" aria-labelledby="rarityControlsTitle">
              <div class="ff-toolbar">
                <div class="ff-toolbar__group">
                  <h2 id="rarityControlsTitle" style="margin:0;">Rarity rankings</h2>
                  <p class="muted" style="margin:0; max-width:36ch;">Sort by rank, rarity score, or staking time, then deep dive into each layered frog card.</p>
                </div>
                <button id="btnThemeCycle" class="ff-button ff-button--ghost">Theme sampler</button>
              </div>

              <div class="ff-toolbar" style="margin-top:18px;">
                <div class="ff-toolbar__group">
                  <button id="btnSortRank" class="ff-button">Sort: Rank ‚Üë</button>
                  <button id="btnSortScore" class="ff-button">Sort: Score ‚Üì</button>
                </div>
                <div class="ff-toolbar__group">
                  <label class="sr-only" for="raritySearchId">Jump to frog ID</label>
                  <input id="raritySearchId" class="ff-input" type="number" min="1" placeholder="Find frog ID‚Ä¶" />
                  <button id="btnGo" class="ff-button ff-button--solid">Go</button>
                </div>
              </div>

              <div id="rarityGrid" class="ff-grid-cards">
                <div class="pg-muted">Loading rarity‚Ä¶</div>
              </div>

              <div class="ff-toolbar" style="justify-content:center; margin-top:28px;">
                <button id="btnMore" class="ff-button ff-button--ghost" style="display:none;">Load more frogs</button>
              </div>
            </section>

            <aside class="ff-side-panel">
              <section class="ff-panel" aria-labelledby="rarityTips">
                <div>
                  <h2 id="rarityTips">Tips for explorers</h2>
                  <p class="muted">Keep these shortcuts in mind while browsing the rankings.</p>
                </div>
                <ul class="ff-list-compact">
                  <li>
                    <strong>Theme sampler</strong>
                    <span class="meta">Cycle through ten foil-inspired treatments for the card layout.</span>
                  </li>
                  <li>
                    <strong>Staking indicators</strong>
                    <span class="meta">Cards highlight staking age and owner data pulled from the controller.</span>
                  </li>
                  <li>
                    <strong>Metadata order</strong>
                    <span class="meta">Traits render in the exact order stored in <code>frog/json/&lt;id&gt;.json</code>.</span>
                  </li>
                </ul>
              </section>
            </aside>
          </div>
        </div>
      </section>
    </main>

    <footer class="ff-footer">
      <div class="ff-container ff-footer__inner">
        <span>¬© Fresh Frogs</span>
        <span>Analyze rarity and stake smarter.</span>
      </div>
    </footer>
  </div>

  <script>
    (function(){
      const CFG = window.FF_CFG || {};
      const TOTAL = Number(CFG.TOTAL_SUPPLY || 4040);
      const ROOT  = String(CFG.SOURCE_PATH || '').replace(/\/+$/,'');
      function sample(n,max){
        const pool = Array.from({length:max}, (_,i)=> i+1);
        for(let i=pool.length-1;i>0;i--){
          const j=Math.floor(Math.random()*(i+1));
          const t=pool[i]; pool[i]=pool[j]; pool[j]=t;
        }
        return pool.slice(0,n);
      }
      function randomize(){
        const imgs = Array.from(document.querySelectorAll('[data-rarity-frog]'));
        if(!imgs.length) return;
        const ids = sample(imgs.length, TOTAL);
        imgs.forEach(function(img, idx){
          const id = ids[idx];
          img.src = ROOT + '/frog/' + id + '.png';
          img.alt = 'Frog ' + id;
        });
      }
      if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', randomize); else randomize();
    })();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.4/dist/web3.min.js"></script>
  <script src="assets/js/config.js"></script>
  <script src="assets/js/utils.js"></script>
  <script src="assets/js/rarity.js"></script>
  <script src="assets/js/modal.js"></script>
  <script src="assets/abi/collection_abi.js"></script>
  <script src="assets/abi/controller_abi.js"></script>
  <script src="assets/js/staking-adapter.js"></script>
  <script src="assets/js/frog-renderer.js"></script>
  <script src="assets/js/frog-cards.js" defer></script>
  <script src="assets/js/topbar.js"></script>
  <script src="assets/js/rarity-page.js"></script>
</body>
</html>
