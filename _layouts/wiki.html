<link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
<style>
    html {
        font-family: Poppins, sans-serif;
        font-size: small;
        transition: all .2s ease;
        background-image: url("/assets/background.png");
    }
    body {
        margin-left: auto;
        margin-right: auto;
        width: 80%;
        background: white;
        border-radius: 5px;
        padding: 0%;
    }
    section {
        padding: 1%;
    }
    .minting-display {
        float: right;
        margin: 5%;
        margin-left: 10%;
        margin-right: 10%;
    }
    .minting-console {
        margin-top: 2%;
        font-size: x-small;
        image-rendering: pixelated;
        width: inherit;
        height: auto;
    }
    .mintingTray {
        text-align: center;
        vertical-align: center;
        height: auto;
        border-radius: 5px;
        border: solid 1px lightgrey;
        overflow: hidden;
        transition: box-shadow .2s;
        width: 256px;
    }
    .mintingTray:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
    .button_bar {
        width: 100%;
        margin-bottom: 4%;
        text-align: center;
    }
    .button_2 {
        margin-left: auto;
        margin-right: auto;
        background: white;

        border: 1px solid lightgray;
        padding: 1%;
        border-radius: 5px;
        margin: 1%;
        margin-left: none;
        font-family: inherit;
        transition: all .2s ease;
        min-width: 5%;
        text-align: center;
        cursor: pointer;
        min-height: 1%;
    }
    #button_ownedfrogs:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: #7cc1ff;
        color: white;
        border: 1px solid #7cc1ff;
    }
    .button_bar {
        margin-left: auto;
        margin-right: auto;
        width: 256px;
    }
    .switch_button {
        margin-left: auto;
        margin-right: auto;
        background: transparent;
        margin-top: 5%;
        border: 1px solid lightgray;
        padding: 0px;
        width: 20px;
        height: 20px;
        border-radius: 100%;
        font-family: inherit;
        transition: all .2s ease;
        text-align: center;
        cursor: pointer;
    }
    .switch_button:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: #7cc1ff;
        color: white;
    }
    .button_1 {
        margin-left: auto;
        margin-right: auto;
        background: transparent;

        border: 1px solid lightgray;
        padding: 1%;
        border-radius: 5px;
        margin-left: none;
        font-family: inherit;
        transition: all .2s ease;
        min-width: 30%;
        text-align: center;
        cursor: pointer;
        min-height: 1%;
        margin: 1%;
    }
    .buttonbar_mint_on {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: #7cc1ff;
        color: white;
    }
    #buttonbar_mint:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: #7cc1ff;
        color: white;
    }
    #buttonbar_morph:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: lightcoral;
        color: white;
    }
    .buttonbar_morph {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: lightcoral;
        color: white;
        width: fit-content !important;
        border: 1px solid lightgray;
        padding: 4px;
        border-radius: 5px;
        font-family: inherit;
        transition: all .2s ease;
        text-align: center;
        cursor: pointer;
        margin: 8px;
        vertical-align: middle;
    }
    #buttonbar_stake:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
        background-color: lightsalmon;
        color: white;
    }
    .button {
        padding: 16px;
        border: 1px solid lightgray;
        border-radius: 5px;
        background-color: white;
        color: inherit;
        margin-top: 0px;
        margin-left: auto;
        margin-right: auto;
        width: 256px;
        transition: box-shadow .2s;
        cursor: pointer;
        font-family: inherit;
    }
    .button:hover {
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
    .data {
        margin: auto;
        border-radius: 5px;
    }
    .recent_sales {
        text-align: center !important;
        display: inline-flex;
        flex-wrap: wrap;
        image-rendering: pixelated;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }
    .recent_sale {
        text-align: center;
        vertical-align: center;
        width: 100%;
        height: 100%;
        margin: 0.5%;
        border-radius: 5px;
        border: solid 1px lightgrey;
        overflow: hidden;
        transition: box-shadow .2s;
    }
    .recent_sale:hover{
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
    #banner_image {
        width: 100%;
        padding: 0% !important;
        margin: 0% !important;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }
    .frog_name {
        text-align: left;
        font-weight: bold;
        float: left;
        padding: 5%;
        padding-top: 0%;
        margin-left: 2.5%;
    }
    .frog_price {
        text-align: right;
        font-weight: bold;
        float: right;
        padding: 5%;
        padding-top: 0%;
        margin-right: 2.5%;
    }
    .frog_img {
        width: 100%;
        border-radius: 0px;
    }
    .label_name {
        text-align: left;
        float: left;
        margin-left: 2.5%;
        padding: 5%;
        padding-bottom: 0%;
        color: gray;
    }
    .label_price {
        text-align: right;
        float: right;
        margin-right: 2.5%;
        padding: 5%;
        padding-bottom: 0%;
        color: gray;
    }

    .frog_mint {
        text-align: left;
        font-weight: bold;
        float: left;
        padding: 0%;
        margin-left: 2.5%;
        overflow: hidden;
    }
    .frog_q {
        text-align: right;
        font-weight: bold;
        float: right;
        padding: 0%;
        margin-right: 2.5%;
        overflow: hidden;
    }
    .label_mint {
        text-align: left;
        float: left;
        margin-left: 2.5%;
        padding: 0%;
        padding-bottom: 0%;
        color: gray;
        overflow: hidden;
    }
    .label_q {
        text-align: right;
        float: right;
        margin-right: 2.5%;
        padding: 0%;
        padding-bottom: 0%;
        color: gray;
        width: 45%;
        overflow: hidden;
    }
    .frog-tray {
        width: 256px;
        height: auto;
        image-rendering: pixelated;
    }
    .collection-name {
        font-weight: 600;
    }

    #add-frog, #remove-frog {
        cursor: pointer;
    }
    .tray-frog {
        width: 100%;
        display: inline-block;
        margin: 0%;
        transition: all .2s ease;
    }
    .tray-frog:hover {
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari 3-8 */
        transform: scale(1.5);
    }
    .owned_frog {
        text-align: center;
        vertical-align: center;
        width: 100%;
        height: 100%;
        margin: 4px;
        border-radius: 5px;
        border: solid 1px lightgrey;
        overflow: hidden;
        transition: box-shadow .2s;
        cursor: pointer;
    }
    .owned_frog:hover{
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
    .owned_frogs {
        text-align: center;
        display: inline-flex;
        flex-wrap: wrap;
        image-rendering: pixelated;
        margin-left: auto;
        margin-right: auto;
        margin-top: 2%;
        margin-bottom: 2%;
        width: 100%;
        height: 25%;
        border-radius: 5px;
        background-color: #7cc1ff;
        border: 1px solid lightgray;
        color: white;
        transition: all .9s ease;
    }
    #display-desc {
        width: 90%;
        padding: 5%;
        transition: all .9s ease;
    }
    #display-id {
        width: 90%;
        padding: 5%;
    }
    .frog_trait {
        text-align: center;
        border: 1px solid #7cc1ff;
        border-radius: 5px;
        width: 43.1%;
        height: auto;
        padding: 2%;
        margin: 1%;
        display: inline-block;
        transition: all .2s ease;
        cursor: pointer;
        overflow: hidden;
    }
    .frog_trait:hover {
        background-color: #7cc1ff;
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
    .lower_display {
        margin-top: 16px;
        width: 256px;
        text-align: center;
        min-height: 256px;
    }
    .bigContainer {
        overflow: hidden;
        width: 256px;
    }
    img {
        max-width: 100%;
    }

    .containerMint {
        width: auto;
        margin-bottom: 0px;
        margin-top: 0px;
        background-color: transparent;

        display: -webkit-box;
        -webkit-box-orient: horizontal;
        -webkit-box-pack: center;
        -webkit-box-align: center;

        display: -moz-box;
        -moz-box-orient: horizontal;
        -moz-box-pack: center;
        -moz-box-align: center;

        display: box;
        box-orient: horizontal;
        box-pack: center;
        box-align: center;
        overflow: hidden;
    }

    .imgWrapperMint {
        -webkit-box-flex: 13;
        -moz-box-flex: 1;
        box-flex: 1;
        overflow: hidden;
    }

    .frogImgMint {
        transition: transform .2s;
        height: auto;
        display: block;
        image-rendering: pixelated;
        overflow: hidden;
    }
    .frogImgMint:hover{
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari 3-8 */
        transform: scale(1.5);
        box-shadow: none;
        border: none;
    }
    .frogImg2:hover{
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari 3-8 */
        transform: scale(1.5);
        box-shadow: none;
        border: none;
    }
    .frogImg2 {
        transition: transform .2s;
        display: block;
        image-rendering: pixelated;
        overflow: hidden;
        position: absolute;
        width: 128px;
        height: 128px;
        border-radius: 5px;
        margin-left: 64px;
        margin-right: 64px;
    }
    .header_desc {
        padding: 16px;
        border-radius: 5px;
        border: 1px solid lightgray;
        margin-top: 16px;
        margin-bottom: 16px;
    }
    .blue-div {
        border-radius: 5px;
        padding: 8px;
        border: 1px solid #7cc1ff;
    }
    .float-img {
        border-radius: 5px;
        border: 1px solid lightgrey;
        float: left;
        width: 256px;
        margin: 0%;
        margin-right: 5%;
        margin-left: 5%;
        margin-top: 0%;
        margin-bottom: 2.5%;
        vertical-align: middle;
    }
    .float-img2 img {
        width: 256px !important;
        height: 256px !important;
        margin: 0px;
    }
    .float-img2 {
        border-radius: 5px;
        border: 1px solid lightgrey;
        float: right;
        width: 256px;
        height: 256px;
        vertical-align: middle;
        margin: 3%;
        margin-left: 10%;
        margin-right: 20%;
        image-rendering: pixelated;
        background-color: #7cc1ff;
        text-align: center;
        overflow: hidden;
    }
    .meta_img {
        width: 128px;
        height: 128px;
        margin-left: auto;
        margin-right: auto;
        margin-top: auto;
        margin-bottom: auto;
        transition: all .2s ease;
        cursor: pointer;
    }
    .meta_img:hover{
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari 3-8 */
        transform: scale(1.5);
        box-shadow: none;
        border: none;
    }
    .freshfrogsmeta {
        text-align: center;
        display: inline-flex;
        flex-wrap: wrap;
        image-rendering: pixelated;
        margin-left: auto;
        margin-right: auto;
        margin-top: 2%;
        margin-bottom: 2%;
        width: 100%;
        min-height: 25%;
        border-radius: 5px;
        background-color: #7cc1ff;
        border: 1px solid lightgray;
        color: white;
        transition: all .9s ease;
        vertical-align: middle;
    }
    .caption {
        /* Make the caption a block so it occupies its own line. */
        display: block;
    }
    .frogImg3 {
        transition: transform .2s;
        display: block;
        image-rendering: pixelated;
        overflow: hidden;
        position: absolute;
        width: 256px;
        height: 256px;
        border-radius: 5px;
    }
    .headLine2 {
        margin-left: auto;
        margin-right: auto;
        image-rendering: auto !important;
        margin-bottom: 2%;
    }
    .headLineImg {
        image-rendering: crisp-edges;
        height: 32px;
        border-radius: 100%;
        padding: 0px;
        transition: transform .2s;
        margin-left: 8px;
        margin-right: 8px;
        margin-top: auto;
        margin-bottom: auto;
        box-shadow: 3px 3px rgba(122, 122, 122, 0.20);
    }
    .headLineImg:hover{
        -ms-transform: scale(1.5); /* IE 9 */
        -webkit-transform: scale(1.5); /* Safari 3-8 */
        transform: scale(1.5);
        box-shadow: none;
        border: none;
    }
    .sec {
        opacity: 0%;
    }
    .sec2 {
        background-color: #7cc1ff;
        box-shadow: 0px 0px 6px 6px rgba(122, 122, 122, 0.20);
    }
</style>
<link rel="icon" href="../assets/logo.png">
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.0-rc.0/web3.min.js"></script>
        <script src="https://ethereum.factoria.app/f0/token_abi.js"></script>
        <script src="https://unpkg.com/f0js/dist/f0.js"></script>
        <script>

            var traits_list, collection, frog_count, morph, userAddress;

            var nextIdC = 1;

            var base_frog = false;

            var sub_frog = false;

            async function load_mintingTerminal() {

                frog_count = 1;

                document.getElementById('mintingTray').innerHTML = 

                    '<div id="display-table" style="height: 64px;">' +
                    '    <i id="label_name" class="label_name">Frog 3410 / 4040</i><i id="label_price" class="label_price">Quantity</i>' +
                    '    <b id="frog_name" class="frog_name">0.01 ŒûETH</b><b id="frog_price" class="frog_price"><a id="remove-frog" onclick="remove_frog();"><b>-</b></a> <b id="quant-frog">1</b> <a id="add-frog" onclick="add_frog();"><b>+</b></a></b>' +
                    '</div>' +
                    '<div class="bigContainer">' +
                    '    <div id="frogContainer" class="containerMint"></div>' +
                    '    <div id="frogContainer2" class="containerMint"></div>' +
                    '    <div id="frogContainer3" class="containerMint">' +
                    '        <div class="imgWrapperMint"><img id="previewImg" class="frogImgMint" src="https://freshfrogs.github.io/assets/frogs/preview2.gif"/></div>' +
                    '    </div>' +
                    '</div>';

                document.getElementById('lower_display').innerHTML = 

                    '<button id="mint-button" class="button" onclick="refreshPage()"><b><i>Connect Wallet!</i></b></button>' +
                    '<div id="minting-console" class="minting-console">' +
                    '    > connect wallet...' +
                    '</div>';

                morph = false;
                var morphbar = document.getElementById('buttonbar_morph')
                morphbar.style.boxShadow = 'none'
                morphbar.style.background = 'white'
                morphbar.style.color = 'initial'

                document.getElementById('buttonbar_mint').className = 'buttonbar_mint_on button_1';

                document.getElementById('previewImg').setAttribute('src', '../frog/'+nextIdC+'.png')
                
                connect();

            }

            function load_morph() {

                morph = true;
                var morphbar = document.getElementById('buttonbar_morph')
                morphbar.style.boxShadow = '0px 0px 6px 6px rgba(122, 122, 122, 0.20)'
                morphbar.style.background = 'lightcoral'
                morphbar.style.color = 'white'

                document.getElementById('buttonbar_mint').className = 'button_1';

                base_frog = false;
                sub_frog = false;
                
                document.getElementById('mintingTray').innerHTML = 

                    '<div id="display-table" style="height: 64px;">' +
                    '    <i id="label_name" class="label_name">Base Frog</i><button class="switch_button" onclick="switch_base_sub();">üóò</button><i id="label_price" class="label_price">Sub Frog</i>' +
                    '    <b id="frog_name_base" class="frog_name">Select Frog</b><b id="frog_name_sub" class="frog_price">Select Frog</b>' +
                    '</div>' +
                    '<div class="bigContainer">' +
                    '    <div id="frogContainer" class="containerMint"></div>' +
                    '    <div id="frogContainer2" class="containerMint">' +
                    '        <div class="imgWrapperMint"><img id="base_frog_img" class="frogImgMint" src="https://freshfrogs.github.io/frog/606.png"/></div>' + // 603 605
                    '        <div class="imgWrapperMint"><img id="sub_frog_img" class="frogImgMint" src="https://freshfrogs.github.io/frog/407.png"/></div>' +
                    '    </div>' +
                    '    <div id="frogContainer3" class="containerMint"><div class="imgWrapperMint">' +
                    '       <img id="previewImg" class="frogImgMint" src="https://freshfrogs.github.io/assets/frogs/morph-preview.png"/></div>' +
                    '    </div>' +
                    '</div>';

                document.getElementById('lower_display').innerHTML = 

                    '<h4 style="text-align: left;">Morph Fresh Frogs!</h4><hr>' +
                    '<div>' +
                    '   <br><i>1. Connect Wallet!</i>' +
                    '   <br><br><i>2. Select Two Frogs!</i>' +
                    '   <br><br><i>3. Generate Morph!</i>' +
                    '</div>';

                if (typeof userAddress == 'undefined') {
                    try { connect(); } catch (e) { console.log('Failed to Connect : ' + e.message); }
                } else { load_ownedFrogs(); }

                // Load two random Frogs
                // selectBaseFrog(randomIntFromInterval(1, nextIdC));
                // selectSubFrog(randomIntFromInterval(1, nextIdC));
                // combineTokens(base_frog, sub_frog);

            }



            // Select subFrog
            async function selectSubFrog(selected_sub){

                sub_frog = selected_sub

                sub_frog_ID = 'Frog #'+selected_sub

                document.getElementById('frog_name_sub').innerHTML = sub_frog_ID

                document.getElementById(sub_frog_ID).style.boxShadow = '0px 0px 6px 6px lightsalmon'
                
                document.getElementById("sub_frog_img").setAttribute('src', 'https://freshfrogs.github.io/frog/'+sub_frog+'.png')

                let subFrogmetadata = await (await fetch("https://freshfrogs.github.io/frog/json/"+selected_sub+".json")).json();
                for (var i = 0; i < subFrogmetadata.attributes.length; i++){
                    var data = subFrogmetadata.attributes[i]
                    //loadAttribute(data.trait_type, data.value, 'subDisplay')
                }

                if (!base_frog || !sub_frog) {
                    return
                } else {
                    combineTokens(base_frog, sub_frog);
                    return
                }
                
            }

            function randomIntFromInterval(min, max) { // min and max included 
                return Math.floor(Math.random() * (max - min + 1) + min)
            }
            
            // Switch Frogs
            function switch_base_sub() {

                if (!base_frog || !sub_frog) {

                    return

                } else {

                    var base_i = base_frog;
                    var sub_i = sub_frog;

                    base_frog = false;
                    sub_frog = false;

                    selectBaseFrog(sub_i)
                    selectSubFrog(base_i)

                }

            }
            // Select baseFrog
            async function selectBaseFrog(selected_base){

                base_frog = selected_base;

                base_frog_ID = 'Frog #'+selected_base

                document.getElementById('frog_name_base').innerHTML = base_frog_ID

                document.getElementById(base_frog_ID).style.boxShadow = '0px 0px 6px 6px lightcoral'

                document.getElementById("base_frog_img").setAttribute('src', 'https://freshfrogs.github.io/frog/'+base_frog+'.png')

                let baseFrogmetadata = await (await fetch("https://freshfrogs.github.io/frog/json/"+selected_base+".json")).json();
                for (var i = 0; i < baseFrogmetadata.attributes.length; i++){
                    var data = baseFrogmetadata.attributes[i]
                    //loadAttribute(data.trait_type, data.value, 'baseDisplay')
                }

                if (!base_frog || !sub_frog) {
                    return
                } else {
                    combineTokens(base_frog, sub_frog);
                    return
                }
            }

            // Function combine tokens
            async function combineTokens(baseFrog, otherFrog) {
                
                var useGIF = undefined;
                var baseFrog_Frog, baseFrog_SpecialFrog, baseFrog_Trait, baseFrog_Accessory, baseFrog_Eyes, baseFrog_Hat, baseFrog_Mouth = undefined;
                var otherFrog_Frog, otherFrog_SpecialFrog, otherFrog_Trait, otherFrog_Accessory, otherFrog_Eyes, otherFrog_Hat, otherFrog_Mouth = undefined;

                let baseFrogmetadata = await (await fetch("https://freshfrogs.github.io/frog/json/"+baseFrog+".json")).json();

                for (var baseFrogi = 0; baseFrogi < baseFrogmetadata.attributes.length; baseFrogi++) {

                    var data = baseFrogmetadata.attributes[baseFrogi]

                    if (data.trait_type == "Frog") {
                        var baseFrog_Frog = data.value;
                    } else if (data.trait_type == "SpecialFrog") {
                        var baseFrog_SpecialFrog = data.value;
                    } else if (data.trait_type == "Trait") {
                        var baseFrog_Trait = data.value;
                    } else if (data.trait_type == "Accessory") {
                        var baseFrog_Accessory = data.value;
                    } else if (data.trait_type == "Eyes") {
                        var baseFrog_Eyes = data.value;
                    } else if (data.trait_type == "Hat") {
                        var baseFrog_Hat = data.value;
                    } else if (data.trait_type == "Mouth") {
                        if (data.value === "smoking" || data.value === "smokingPipe" || data.value === "smokingCigar") {
                            var baseFrog_Mouth = data.value+"2";
                        } else {
                            var baseFrog_Mouth = data.value;
                        }
                    }
                }

                let otherFrogmetadata = await (await fetch("https://freshfrogs.github.io/frog/json/"+otherFrog+".json")).json();

                for (var otherFrogi = 0; otherFrogi < otherFrogmetadata.attributes.length; otherFrogi++){
                    var data2 = otherFrogmetadata.attributes[otherFrogi]

                    if (data2.trait_type == "Frog") {
                        var otherFrog_Frog = data2.value;
                    } else if (data2.trait_type == "SpecialFrog") {
                        var otherFrog_SpecialFrog = data2.value;
                        if (data2.value == "thirdEye") {
                            if (typeof baseFrog_SpecialFrog !== "undefined") {
                                var otherFrog_Trait = "thirdEye/baseSpecial"
                            } else {
                                var otherFrog_Trait = "thirdEye/base"
                            }
                        } else if (typeof baseFrog_SpecialFrog !== "undefined") {
                            if (baseFrog_SpecialFrog == "thirdEye" && otherFrog_SpecialFrog == "inversedEyes") {
                                var otherFrog_Trait = baseFrog_SpecialFrog+"/baseInversed"
                            } else {
                                var otherFrog_Trait = "special/sand";
                            }
                        } else {
                            var otherFrog_Trait = "sand";
                        }
                        
                    } else if (data2.trait_type == "Trait") { // <--TRAITS
                        if (typeof baseFrog_SpecialFrog !== "undefined") { // Adapt trait for special Frogs
                            if (baseFrog_SpecialFrog === "inversedEyes") {
                                var otherFrog_Trait = "special/"+data2.value
                            } else if (baseFrog_SpecialFrog === "closedEyes") {
                                var otherFrog_Trait = "special/"+data2.value
                            } else { 
                                var otherFrog_Trait = baseFrog_SpecialFrog+"/"+data2.value
                            }
                            if (data2.value == "natural") {
                                if (baseFrog_SpecialFrog === "inversedEyes") {
                                    var otherFrog_Trait = "natural/special/"+otherFrog_Frog
                                } else if (baseFrog_SpecialFrog === "closedEyes") {
                                    var otherFrog_Trait = "natural/special/"+otherFrog_Frog
                                } else { //alert ("baseFrog_SpecialFrog")
                                    var otherFrog_Trait = "natural/"+baseFrog_SpecialFrog+"/"+otherFrog_Frog
                                }
                            }
                        } else if (typeof baseFrog_Frog !== "undefined") { // Regular Frog; continue
                            if (data2.value == "natural") {
                                var otherFrog_Trait = "natural/"+otherFrog_Frog
                            } else {
                                var otherFrog_Trait = data2.value;
                            }
                        }
                    } else if (data2.trait_type == "Accessory") {
                        var otherFrog_Accessory = data2.value;
                    } else if (data2.trait_type == "Eyes") { // shadesAnimation
                        var otherFrog_Eyes = data2.value;
                    } else if (data2.trait_type == "Hat") {
                        var otherFrog_Hat = data2.value;
                    } else if (data2.trait_type == "Mouth") {
                        if (data2.value === "smoking" || data2.value === "smokingPipe" || data2.value === "smokingCigar") {
                            var otherFrog_Mouth = data2.value+"2";
                        } else {
                            var otherFrog_Mouth = data2.value;
                        }
                    }
                }

                thisPlace = 'frogContainer3';
                var thisPlace_div = document.getElementById(thisPlace)
                thisPlace_div.style.background = '#7cc1ff'
                thisPlace_div.style.width = '256px'
                thisPlace_div.style.height = '128px'
                thisPlace_div.innerHTML = ''

                //'Frog #'+ base_frog + ' + ' + sub_frog + '<hr>'
                
                var select = document.getElementById('lower_display')
                select.innerHTML = '<h4 style="text-align: left;">Properties</h4><hr>'

                // Frog
                if (typeof baseFrog_Frog !== 'undefined') {
                    loadAttribute("Frog", baseFrog_Frog, thisPlace)
                    // Trait
                    if (typeof otherFrog_Trait !== 'undefined') {
                        loadAttribute("Trait", otherFrog_Trait, thisPlace)
                    } else if (typeof baseFrog_Trait !== 'undefined') {
                        loadAttribute("Trait", baseFrog_Trait, thisPlace)
                    }
                    // Accessory
                    if (typeof baseFrog_Accessory !== 'undefined') {
                        loadAttribute("Accessory", baseFrog_Accessory, thisPlace)
                    } else if (typeof otherFrog_Accessory !== 'undefined') {
                        loadAttribute("Accessory", otherFrog_Accessory, thisPlace)
                    }
                    // Eyes
                    if (typeof baseFrog_Eyes !== 'undefined') {
                            loadAttribute("Eyes", baseFrog_Eyes, thisPlace)
                        if (baseFrog_Eyes === "shades" || baseFrog_Eyes === "shadesPurple" || baseFrog_Eyes === "shadesThreeD" || baseFrog_Eyes === "shadesWhite") {
                            loadAttribute("Eyes", "shadesAnimation", thisPlace)
                        }
                    } else if (typeof otherFrog_Eyes !== 'undefined') {
                            loadAttribute("Eyes", otherFrog_Eyes, thisPlace)
                        if (otherFrog_Eyes === "shades" || otherFrog_Eyes === "shadesPurple" || otherFrog_Eyes === "shadesThreeD" || otherFrog_Eyes === "shadesWhite") {
                            loadAttribute("Eyes", "shadesAnimation", thisPlace)
                        }
                    }
                    // Hat
                    if (typeof baseFrog_Hat !== 'undefined') {
                        loadAttribute("Hat", baseFrog_Hat, thisPlace)
                    } else if (typeof otherFrog_Hat !== 'undefined') {
                        loadAttribute("Hat", otherFrog_Hat, thisPlace)
                    }
                    // Mouth
                    if (typeof baseFrog_Mouth !== 'undefined') {
                        loadAttribute("Mouth", baseFrog_Mouth, thisPlace)
                    } else if (typeof otherFrog_Mouth !== 'undefined') {
                        loadAttribute("Mouth", otherFrog_Mouth, thisPlace)
                    }
                // Special Frog
                } else if (typeof baseFrog_SpecialFrog !== 'undefined') {
                    loadAttribute("SpecialFrog", baseFrog_SpecialFrog, thisPlace)
                    if (typeof otherFrog_Trait !== 'undefined') {
                        loadAttribute("Trait", otherFrog_Trait, thisPlace)
                    } else if (typeof baseFrog_Trait !== 'undefined') {
                        loadAttribute("Trait", baseFrog_Trait, thisPlace)
                    }
                    // Accessory
                    if (typeof baseFrog_Accessory !== 'undefined') {
                        loadAttribute("Accessory", baseFrog_Accessory, thisPlace)
                    } else if (typeof otherFrog_Accessory !== 'undefined') {
                        loadAttribute("Accessory", otherFrog_Accessory, thisPlace)
                    }
                    // Eyes
                    if (typeof baseFrog_Eyes !== 'undefined') {
                            loadAttribute("Eyes", baseFrog_Eyes, thisPlace)
                        if (baseFrog_Eyes === "shades" || baseFrog_Eyes === "shadesPurple" || baseFrog_Eyes === "shadesThreeD" || baseFrog_Eyes === "shadesWhite") {
                            loadAttribute("Eyes", "shadesAnimation", thisPlace)
                        }
                    } else if (typeof otherFrog_Eyes !== 'undefined') {
                            loadAttribute("Eyes", otherFrog_Eyes, thisPlace)
                        if (otherFrog_Eyes === "shades" || otherFrog_Eyes === "shadesPurple" || otherFrog_Eyes === "shadesThreeD" || otherFrog_Eyes === "shadesWhite") {
                            loadAttribute("Eyes", "shadesAnimation", thisPlace)
                        }
                    }
                    // Hat
                    if (typeof baseFrog_Hat !== 'undefined') {
                        loadAttribute("Hat", baseFrog_Hat, thisPlace)
                    } else if (typeof otherFrog_Hat !== 'undefined') {
                        loadAttribute("Hat", otherFrog_Hat, thisPlace)
                    }
                    // Mouth
                    if (typeof baseFrog_Mouth !== 'undefined') {
                        loadAttribute("Mouth", baseFrog_Mouth, thisPlace)
                    } else if (typeof otherFrog_Mouth !== 'undefined') {
                        loadAttribute("Mouth", otherFrog_Mouth, thisPlace)
                    }
                }
                document.getElementById('morph_float').innerHTML = document.getElementById('frogContainer3').innerHTML
            }

            // Load attribute
            function loadAttribute(trait, attribute, where) {
                newAttribute = document.createElement("img")
                newAttribute.href = "https://opensea.io/collection/fresh-frogs?search[sortAscending]=true&search[sortBy]=PRICE&search[stringTraits][0][name]="+trait+"&search[stringTraits][0][values][0]="+attribute
                newAttribute.id = attribute
                newAttribute.target = "_blank"
                newAttribute.className = "frogImg2" //shadesAnimation
                newAttribute.style.cursor = "pointer"
                if (attribute === "smoking2" || attribute === "smokingPipe2" || attribute === "smokingCigar2") { 
                    newAttribute.src = "https://freshfrogs.github.io/the-pad/"+trait+"/"+attribute+".gif"
                } else if (attribute === "morphAnimation") {
                    newAttribute.src = "https://freshfrogs.github.io/the-pad/Frog/loadMorph.gif"
                } else if (attribute === "shadesAnimation") {
                    newAttribute.src = "https://freshfrogs.github.io/the-pad/Eyes/shadesAnimation.gif"
                } else {
                    newAttribute.src = "https://freshfrogs.github.io/the-pad/"+trait+"/"+attribute+".png"
                }
                newAttribute.alt = attribute
                document.getElementById(where).appendChild(newAttribute)

                //console.log(traits_list[trait][attribute.toLowerCase()])

                var trait_rarity = ((traits_list[trait][attribute.toLowerCase()] / 4040) * 100).toFixed(0)

                if (trait_rarity == 'NaN') { trait_rarity = 0 }

                var new_trait = document.createElement('div')
                new_trait.className = 'frog_trait'
                new_trait.onclick = function() {
                    if (trait !== 'Frog' && trait !== 'SpecialFrog') {
                        document.getElementById(attribute).classList.toggle('sec');
                        this.classList.toggle('sec2');

                        document.getElementById('morph_float').innerHTML = document.getElementById('frogContainer3').innerHTML
                    }
                }
                new_trait.innerHTML = 
                    
                    '<i>'+trait+'</i><br>' +
                    '<b>'+attribute.slice(0, 13)+'</b><br>' +
                    '<i>'+trait_rarity+'% have this trait<i>';

                document.getElementById('lower_display').appendChild(new_trait)
            }

            async function load_ownedFrogs() {

                const options = {
                    method: 'GET',
                    headers: {Accept: 'application/json', 'X-API-KEY': '1b80881e422a49d393113ede33c81211'}
                };

                var owned_frogs_div = document.getElementById('owned-frogs')
                
                owned_frogs_div.innerHTML = ''

                owned_frogs_div.style.background = 'white'
                owned_frogs_div.style.border = 'none'
                owned_frogs_div.style.color = 'inherit'

                owned_frogs_div.style.height = 'auto';

                fetch('https://api.opensea.io/api/v1/assets?owner='+userAddress+'&order_direction=asc&asset_contract_address=0xBE4Bef8735107db540De269FF82c7dE9ef68C51b&limit=50&include_orders=false', options)
                .then((res) => res.json())
                .then((res) => {
                    var { assets } = res
                    assets.forEach((frog) => { // For Each FROG


                            var { name, token_metadata, permalink, traits, external_link, token_id } = frog

                            owned_frog = document.createElement('a');
                            owned_frog.id = name
                            owned_frog.className = 'owned_frog';
                            owned_frog.style.width = 128+'px';
                            owned_frog.onclick = function() { // Frog Select ()
                                
                                var this_frog_ID = event.currentTarget.id
                                
                                var this_frog = this_frog_ID.replace('Frog #', ''); // token ID


                                if (morph) {

                                    if (!base_frog && sub_frog !== this_frog) { // SELECT BASE

                                        selectBaseFrog(this_frog);
                                        return
                                        
                                    } else if (this_frog == base_frog) { // UN-SELECT BASE

                                        document.getElementById('frog_name_base').innerHTML = 'Select Frog'
                                        document.getElementById(this_frog_ID).style.boxShadow = 'none'
                                        base_frog = false;
                                        return

                                    } else if (!sub_frog && base_frog !== this_frog) { // SELECT SUB

                                        selectSubFrog(this_frog);
                                        
                                        return

                                    } else if (this_frog == sub_frog) { // UN-SELECT SUB

                                        document.getElementById('frog_name_sub').innerHTML = 'Select Frog'
                                        document.getElementById(this_frog_ID).style.boxShadow = 'none'
                                        sub_frog = false;
                                        return

                                    } else { return }

                                } else {

                                    document.getElementById('buttonbar_mint').className = 'button_1';
                                    
                                    var all_owned_frogs = document.getElementsByClassName('owned_frog')
                                    for (var i = 0; i < all_owned_frogs.length; i++) {
                                        all_owned_frogs[i].style.boxShadow = 'none';
                                    }

                                    document.getElementById(this_frog_ID).style.boxShadow = '0px 0px 6px 6px #7cc1ff'
                                }

                                document.getElementById('frogContainer').innerHTML = ''
                                document.getElementById('frogContainer2').innerHTML = ''

                                document.getElementById('frogContainer3').innerHTML = '<img id="display-frog" class="tray-frog" src="../frog/3410.png">'
                                
                                document.getElementById('display-frog').setAttribute('src', '../frog/'+this_frog+'.png')

                                document.getElementById('label_name').innerHTML = 'Fresh Frogs NFT'

                                document.getElementById('frog_name').innerHTML = name

                                document.getElementById('label_price').innerHTML = 'Owner'

                                document.getElementById('frog_price').innerHTML = '(You)'

                                etherscan_link = 'https://etherscan.io/nft/0xbe4bef8735107db540de269ff82c7de9ef68c51b/'+token_id
                                gem_xyz_link = 'https://www.gem.xyz/asset/0xbe4bef8735107db540de269ff82c7de9ef68c51b/'+token_id

                                document.getElementById('lower_display').innerHTML = 

                                '<h4 style="text-align: left;">Properties</h4>' +

                                    '<b><a href="'+permalink+'" target="_blank">opensea.io</a></b> ' + ' | ' + ' <b><a href="'+etherscan_link+'" target="_blank">etherscan.io</a></b> '  + ' | ' + ' <b><a href="'+gem_xyz_link+'" target="_blank">gem.xyz</a></b> ' + '<hr>'

                                traits.forEach((trait) => {

                                    var { trait_type, value, trait_count } = trait

                                    var trait_rarity = ((trait_count / 4040) * 100).toFixed(0)

                                    var new_trait = document.createElement('div')
                                    new_trait.className = 'frog_trait'
                                    new_trait.innerHTML = 
                                        
                                        '<i>'+trait_type+'</i><br>' +
                                        '<b>'+value.slice(0, 13)+'</b><br>' +
                                        '<i>'+trait_rarity+'% have this trait<i>';

                                    document.getElementById('lower_display').appendChild(new_trait)

                                })      
                            
                            }
                            owned_frog.innerHTML = 
                                '<img class="frog_img" src='+external_link+'>' +
                                '<i class="label_name">Fresh Frogs NFT</i>' +
                                '<b class="frog_name">'+name+'</b>';
                            document.getElementById('owned-frogs').appendChild(owned_frog);
                        
                    })
                })
                .catch(e => {
                    document.getElementById('button_ownedfrogs').innerHTML = 'No Frogs Found :(';
                    console.log('Could not get assets from Opensea : ' + e.message)
                })
            }

            // Manually check Frog transactions
            async function load_ownedFrogs_manual() {

                let this_user = userAddress;

                console.log('Checking Frogs Manually.. for user...'+userAddress)

                try {

                    let ownedFrogs = await collection.methods.balanceOf(this_user).call()

                    if (ownedFrogs <= 0) { // ‚ùå No FROGS
                        console.log("It seems you do not own any FROGS!")
                        return
                    }

                    for (var thisToken = 1; thisToken < nextIdC; thisToken++) {

                        let owner = await collection.methods.ownerOf(thisToken).call()

                        if (this_user === owner.toLowerCase()) {
                            console.log(thisToken)
                        }

                    }
                } catch (e) {
                    console.log("Something went wrong, refresh the page!"+e.message)
                    //document.getElementById("netStatus").innerHTML = "Connect to view 'FROG' tokens... <b><i><strong>"+addressCut+' ‚úì</strong></i></b>'+'<br>Compiling... ‚ùå '+loadedFrogs+'/'+ownedFrogs+' FROG(s) loaded!'+'<br><input type="text" class="myProgress" id="frogIndex" onkeyup="frogIndexer()" placeholder="Search by TokenID">'
                }

            }

            function truncateAddress(address) {
                if (!address) {
                    return "";
                }
                return `${address.substr(0, 5)}...${address.substr(
                    address.length - 5,
                    address.length
                )}`;
            }
            function reset_frogsmeta() {

                var freshfrogsmeta = document.getElementById('freshfrogsmeta')
                freshfrogsmeta.innerHTML = 

                    '<div style="margin-left: 20%; margin-right: auto;" onclick="loadBaseFrogTypes();">' +
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(3).png"/>' +
                    '    <p>Base Frog Types</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;" onclick="loadColoredFrogTypes();">' +
                    '    <img class="meta_img" src="../the-pad/Frog/cyanTreeFrog.png"/>' +
                    '    <p>Colored Frog Types</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;" onclick="loadSpecialFrogTypes();">' +
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/peace.png"/>' +
                    '    <p>Special Frog Types</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: 20%;" onclick="loadNaturalFrogTypes();">' +
                    '    <img class="meta_img" src="../the-pad/Frog/redEyedTreeFrog.png"/>' +
                    '    <p>Natural Frog Types</p>' +
                    '</div>';

            }
            // Load Special Frog Types
            function loadColoredFrogTypes() {

                var freshfrogsmeta = document.getElementById('freshfrogsmeta')
                freshfrogsmeta.innerHTML = 
                
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/blueTreeFrog.png"/>' +
                    '    <p>blueTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/brownTreeFrog.png"/>' +
                    '    <p>brownTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/cyanTreeFrog.png"/>' +
                    '    <p>cyanTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/goldenTreeFrog.png"/>' +
                    '    <p>goldenTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/greenTreeFrog.png"/>' +
                    '    <p>greenTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/orangeTreeFrog.png"/>' +
                    '    <p>orangeTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/pinkTreeFrog.png"/>' +
                    '    <p>pinkTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/purpleTreeFrog.png"/>' +
                    '    <p>purpleTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/tomatoFrog.png"/>' +
                    '    <p>tomatoFrog</p>' +
                    '</div>';

            }
            // Load Special Frog Types
            function loadSpecialFrogTypes() {

                var freshfrogsmeta = document.getElementById('freshfrogsmeta')
                freshfrogsmeta.innerHTML = 
                
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/closedEyes.png"/>' +
                    '    <p>closedEyes</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/croaking.png"/>' +
                    '    <p>croaking</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/inversedEyes.png"/>' +
                    '    <p>inversedEyes</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/peace.png"/>' +
                    '    <p>peace</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/SpecialFrog/thirdEye.png"/>' +
                    '    <p>thirdEye</p>' +
                    '</div>';

            }
            // Load Natural Frog Types
            function loadNaturalFrogTypes() {

                var freshfrogsmeta = document.getElementById('freshfrogsmeta')
                freshfrogsmeta.innerHTML = 
                
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/blueDartFrog.png"/>' +
                    '    <p>blueDartFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/goldenDartFrog.png"/>' +
                    '    <p>goldenDartFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/grayTreeFrog.png"/>' +
                    '    <p>grayTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/lightBrownTreeFrog.png"/>' +
                    '    <p>lightBrownTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/redEyedTreeFrog.png"/>' +
                    '    <p>redEyedTreeFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/splendidLeafFrog.png"/>' +
                    '    <p>splendidLeafFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/stawberryDartFrog.png"/>' +
                    '    <p>stawberryDartFrog</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/unknown.png"/>' +
                    '    <p>"unknown"</p>' +
                    '</div>';

            }
            // Load Base Frog Types
            function loadBaseFrogTypes() {

                var freshfrogsmeta = document.getElementById('freshfrogsmeta')
                freshfrogsmeta.innerHTML = 
                
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(1).png"/>' +
                    '    <p>treeFrog(1)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(2).png"/>' +
                    '    <p>treeFrog(2)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(3).png"/>' +
                    '    <p>treeFrog(3)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(4).png"/>' +
                    '    <p>treeFrog(4)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(5).png"/>' +
                    '    <p>treeFrog(5)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(6).png"/>' +
                    '    <p>treeFrog(6)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(7).png"/>' +
                    '    <p>treeFrog(7)</p>' +
                    '</div>' +
                    '<div style="margin-left: auto; margin-right: auto;">' + 
                    '    <img class="meta_img" src="../the-pad/Frog/treeFrog(8).png"/>' +
                    '    <p>treeFrog(8)</p>' +
                    '</div>';

            }
            // REMOVE FROG from minting Tray
            function remove_frog() {
                if (frog_count >= 7) {
                    var select = document.getElementById("frogContainer");
                    select.removeChild(select.lastChild);
                    frog_count = frog_count - 1
                } else if (frog_count >= 4) {
                    var select = document.getElementById("frogContainer2");
                    select.removeChild(select.lastChild);
                    frog_count = frog_count - 1
                } else if (frog_count >= 2) {
                    var select = document.getElementById("frogContainer3");
                    select.removeChild(select.lastChild);
                    frog_count = frog_count - 1
                }
                if (frog_count <= 1) {
                    mintList = "Frog #"+nextIdC
                } else {
                    mintList = "Frog #"+nextIdC+" - "+((nextIdC-1)+frog_count)
                }

                document.getElementById('frog_name').innerHTML = (0.01 * frog_count) + ' ŒûETH'

                document.getElementById('quant-frog').innerHTML = frog_count
                document.getElementById('label_name').innerHTML = mintList
            }
            // ADD FROG to minting tray
            function add_frog() {
                if (typeof frog_count == 'undefined') { frog_count = 1; }
                if (frog_count < 9) {
                    if (frog_count <= 2) {
                        newFrog = document.createElement("div")
                        newFrog.className = "imgWrapperMint"
                        newFrog.innerHTML = "<img class='frogImgMint' src='https://freshfrogs.github.io/frog/"+(nextIdC+frog_count)+".png'/>"
                        document.getElementById("frogContainer3").appendChild(newFrog)
                        frog_count = frog_count + 1
                    } else if (frog_count <= 5) {
                        newFrog = document.createElement("div")
                        newFrog.className = "imgWrapperMint"
                        newFrog.innerHTML = "<img class='frogImgMint' src='https://freshfrogs.github.io/frog/"+(nextIdC+frog_count)+".png'/>"
                        document.getElementById("frogContainer2").appendChild(newFrog)
                        frog_count = frog_count + 1
                    } else if (frog_count <= 8) {
                        newFrog = document.createElement("div")
                        newFrog.className = "imgWrapperMint"
                        newFrog.innerHTML = "<img class='frogImgMint' src='https://freshfrogs.github.io/frog/"+(nextIdC+frog_count)+".png'/>"
                        document.getElementById("frogContainer").appendChild(newFrog)
                        frog_count = frog_count + 1
                    }
                    
                    if (frog_count <= 1) {
                        mintList = "Frog #"+nextIdC
                    } else {
                        mintList = "Frog #"+nextIdC+" - "+((nextIdC-1)+frog_count)
                    }
                }

                document.getElementById('frog_name').innerHTML = (0.01 * frog_count) + ' ŒûETH'

                document.getElementById('quant-frog').innerHTML = frog_count
                document.getElementById('label_name').innerHTML = mintList
            }
            function refreshPage() {
                window.location.reload();
            } 
            // Login with Web3 via Metamasks window.ethereum library
            async function connect() {

                console.log('Connecting...')
                    
                const web3 = new Web3(window.ethereum);   // Open WEB3.0 Browsner Exentions Window
                const f0 = new F0();    // Connect to Factoria
                const CONTRACT_ADDRESS = "0xBE4Bef8735107db540De269FF82c7dE9ef68C51b";    // Contract Address (Ethereum Mainnet) 0xBE4Bef8735107db540De269FF82c7dE9ef68C51b // Rinkeby: 0xc2203Ff7B9d1c65c8Cf0F6c776f6CF358af3c524
                const COLLECTION = collection = new web3.eth.Contract(token_abi, CONTRACT_ADDRESS);    // Token ABI; imported from Factoria
                const NETWORK = "main";   // Which Network?


                try {   // Connect Wallet
                    
                    await f0.init({
                        web3: web3,
                        contract: CONTRACT_ADDRESS,
                        network: NETWORK
                    })

                    userAddress = await web3.currentProvider.selectedAddress

                    console.log('Connected Wallet! '+userAddress)

                    console.log('Done! Loading FROG tokens...')

                    if (!morph) { document.getElementById('mint-button').innerHTML = '<b><a href="https://freshfrogs.github.io">Mint freshfrogs.github.io</a></b>'; }
                    document.getElementById('user-add').innerHTML = userAddress

                    ownedFrogs = await collection.methods.balanceOf(userAddress).call();

                    if (ownedFrogs >= 1) {
                        load_ownedFrogs()
                    }

                // Done! Ready to mint!
                } catch (e) { // Failed; Send Error Code!
                    console.log("Failed to Connect! Error : " + e.message);
                    return
                }

            }


            // start here


            document.addEventListener("DOMContentLoaded", async () => {


                connect();


                document.querySelector("#morph_ref").addEventListener("click", async (e) => {
                    document.getElementById('minting-display').scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'center'
                    });
                })

              
                // Pull Collection data from OpenSea

                const options = {method: 'GET', headers: {'X-API-KEY': '1b80881e422a49d393113ede33c81211'}};

                fetch('https://api.opensea.io/api/v1/collection/fresh-frogs', options)
                .then(collection => collection.json())
                .then(collection => {

                    var { collection: { banner_image_url, created_date, description, dev_seller_fee_basis_points, external_url, featured_image_url, name, payout_address, traits, stats: { floor_price, market_cap, total_volume, count, num_owners } } } = collection

                    traits_list = traits;

                    document.getElementById('banner_image').setAttribute('src', banner_image_url)
                    document.getElementById('name').innerHTML = name
                    document.getElementById('count').innerHTML = count
                    document.getElementById('num_owners').innerHTML = num_owners
                    document.getElementById('market_cap').innerHTML = market_cap.toFixed(2)+' Œû'
                    document.getElementById('floor_price').innerHTML = floor_price+' Œû'
                    document.getElementById('total_volume').innerHTML = total_volume.toFixed(2)+' Œû'

                //    var orig_desc = document.getElementById('description').innerHTML;
                //    document.getElementById('description').innerHTML = orig_desc + ' ' + description
                    document.getElementById('created_date').innerHTML = 'Created ' + created_date
                    //document.getElementById('payout_address').innerHTML = payout_address

                    var initial_sales = (parseInt(count) - 3240) * 0.01

                    //document.getElementById('initial_sales').innerHTML = (initial_sales+parseInt(total_volume.toFixed(2)))+' Œû'

                })
                .catch(e => {

                    console.log('Error: Could not get Collection data from Opensea.');
                    console.error('Error : ' + e.message)
              
                }); // End data pull / first paid Frog 3,236

                // Assets
                fetch('https://api.opensea.io/api/v1/assets?order_direction=desc&asset_contract_address=0xBE4Bef8735107db540De269FF82c7dE9ef68C51b&limit=3&include_orders=false', options)
                .then((set) => set.json())
                .then((set) => {
                    var { assets } = set
                    //console.log(assets)
                    nextIdC = parseInt(assets[0].name.replace('Frog #', '')) + 1;
                    document.getElementById('label_name').innerHTML = 'Frog #'+nextIdC
                    document.getElementById('previewImg').setAttribute('src', '../frog/'+nextIdC+'.png')
                })
                .catch(e => {

                    console.log('Error: Could not get recent assets from Opensea...');
                    console.error('Error : ' + e.message)

                })

                // Get recent sales
              
                fetch('https://api.opensea.io/api/v1/events?collection_slug=fresh-frogs&event_type=successful&limit=7', options)
                .then(res => res.json())
                .then(res => {

                    var { asset_events } = res

                    //console.log(asset_events)
                    
                    var percent_width = 92 / 7 + '%'

                    asset_events.forEach((sale) => {
                      

                        try {

                            var { asset: { image_url, name, permalink }, payment_token: { decimals }, total_price } = sale;

                            var sale_price = total_price / Math.pow(10, decimals);

                            //console.log('Sale found...'+sale.asset.name+' : '+sale_price);

                            recent_sale = document.createElement('a');
                            recent_sale.className = 'recent_sale';
                            recent_sale.style.width = 128+64+'px';
                            recent_sale.href = permalink;
                            recent_sale.innerHTML = 
                                '<img class="frog_img" src='+image_url+'>' +
                                '<i class="label_name">Fresh Frogs NFT</i><i class="label_price">Price</i>' +
                                '<b class="frog_name">'+name+'</b><b class="frog_price">Œû '+sale_price+'</b>';
                            document.getElementById('recent_sales').appendChild(recent_sale);
                      
                        } catch (e) { console.log('Error : ' + e.message) }

                    })


                })
                .catch(e => {

                    console.log('Error: Could not get recent sales from Opensea...');
                    console.error('Error : ' + e.message)

                })
            })
        </script>
    </head>
    <body>
        <img class="banner_image" id="banner_image" src="../assets/frogs/backfrogs.png"/>
        <section>
            <a style="display: inline-flex !important;" href="https://opensea.io/collection/fresh-frogs" target="_blank"><h1 class="collection-name" id="name">Fresh Frogs NFT</h1><img class="headLineImg" src="../assets/opensea.png"></a>
            <p>Items: <b id="count"></b> | Owners: <b id="num_owners"></b> | Market Cap: <b id="market_cap"></b> | Floor Price: <b id="floor_price"></b> | Sales Volume: <b id="total_volume"></b> <b id="initial_sales"></b></p>
            {{ content }}
        </section>
    <body>
    <footer></footer>
</html>