<!doctype html>
<html lang="{{ site.lang | default: 'en-US' }}">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Fresh Frogs</title>
  <link rel="icon" href="./assets/logo.png" />

  <!-- Keep your existing theme file (Jekyll/GitHub Pages) -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">

  <!-- Vendor / Web3 -->
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
  <![endif]-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.0-rc.0/web3.min.js"></script>
  <script src="https://ethereum.factoria.app/f0/token_abi.js"></script>
  <script src="https://unpkg.com/f0js/dist/f0.js"></script>
  <script src="https://freshfrogs.github.io/assets/js/collection_abi.js"></script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6PB0WKB4SH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6PB0WKB4SH');
  </script>

  <style>
    /* =========================
       Base / Page
    ========================== */
    :root{
      --brand: #7cc1ff;
      --text: #ffffff;
      --shadow: rgba(122, 122, 122, 0.20);
      --shadow-strong: rgba(122, 122, 122, 0.25);
      --card: rgba(122, 122, 122, 0.20);
      --panel: #7cc1ff;
      --light: #f4f4f4;
      --darkText: #333;
      --border: #e0e0e0;
    }

    html{
      background-image: url("/assets/background.png");
      background-repeat: repeat;
      background-position: top left;
    }

    body{
      margin: 0;
      padding: 0;
      background: transparent;
    }

    html, h1, h2, h3, p, a, div, span, li{
      font-family: apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
        sans-serif, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji" !important;
    }

    a{ color: inherit; }
    img{ max-width: 100%; }

    .wrapper{
      margin-left: auto;
      margin-right: auto;
    }

    .bodyb{
      background-color: transparent;
      margin-left: auto;
      margin-right: auto;
      padding-top: 8px;
      margin-top: 5%;
    }

    .top{
      margin: 0 !important;
      text-align: center;
      image-rendering: pixelated;
    }

    /* =========================
       Layout Blocks
    ========================== */
    header{
      border: 4px solid var(--brand);
      overflow: hidden;
      background-color: var(--brand);
      text-align: center;
      border-radius: 7px;
      padding: 14px;
      width: auto;
      color: var(--darkText);
    }

    section{
      color: var(--text) !important;
      background-color: var(--brand);
      text-align: center;
      border-radius: 7px;
      padding: 14px;
      padding-bottom: 16px !important;
      padding-top: 0px !important;
      width: auto;
      overflow: hidden;
      margin-bottom: 16px;
    }

    footer{
      text-align: center;
      color: var(--text);
      padding: 16px 0 24px;
    }

    /* =========================
       Mint tray / controls
    ========================== */
    ul.downloads2{
      list-style: none;
      height: 40px;
      padding: 0;
      background: white;
      border-radius: 5px;
      border: 1px solid white;
      width: 270px;
      box-shadow: 3px 3px var(--shadow);
      margin-left: auto;
      margin-right: auto;
      margin-top: 2%;
      line-height: 1;
      text-align: center;
      vertical-align: middle;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    ul.downloads2 li{
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      white-space: nowrap;
    }

    .downloads{
      margin-top: 0%;
      margin-bottom: 4%;
      margin-left: auto;
      margin-right: auto;
      padding: 14px;
    }

    .pre{
      border-radius: 2%;
      text-align: center;
      padding: 0px;
      margin-bottom: 8px;
      width: 100%;
      height: 100%;
      box-shadow: none;
    }

    .headerDiv{
      padding: 4px;
      border-radius: 5px;
      color: white !important;
      margin: 0px !important;
    }

    .bigContainer{
      border-radius: 5px;
      border: 0px solid var(--border);
      overflow: hidden;
      background-color: var(--card);
      margin-left: auto;
      margin-right: auto;
      margin-top: 2%;
      margin-bottom: 2%;
      width: 256px;
      box-shadow: 3px 3px var(--shadow);
    }

    .containerMint{
      width: auto;
      margin: 0;
      background-color: transparent;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      padding: 6px;
      flex-wrap: nowrap;
    }

    .imgWrapperMint{
      flex: 0 0 auto;
    }

    .frogImgMint{
      transition: transform .2s;
      display: block;
      image-rendering: pixelated;
      overflow: hidden;
      border-radius: 5px;
      width: 76px;
      height: 76px;
      object-fit: cover;
    }

    .frogImgMint:hover{
      transform: scale(1.5);
      box-shadow: none;
      border: none;
    }

    /* =========================
       Buttons / pointer
    ========================== */
    .pointer{
      transition: transform .2s;
      cursor: pointer;
    }
    .pointer:hover{
      transform: scale(1.1);
    }

    /* =========================
       Console / status
    ========================== */
    .consoleOutput{
      border-radius: 5px;
      padding: 8px;
      background: transparent;
      color: white;
    }

    .hr2{
      width: 128px;
      margin-left: auto;
      margin-right: auto;
      margin-top: 1%;
    }

    .mintingTextGreen{
      background-color: #99ffc5;
      border-radius: 5px;
      box-shadow: 3px 3px var(--shadow-strong);
      padding: 4px;
      color: var(--darkText) !important;
    }
    .mintingTextWhite{
      background-color: #faff99;
      border-radius: 5px;
      box-shadow: 3px 3px var(--shadow-strong);
      padding: 4px;
      color: var(--darkText) !important;
    }
    .mintingTextRed{
      background-color: #ff99b6;
      border-radius: 5px;
      box-shadow: 3px 3px var(--shadow-strong);
      padding: 4px;
      color: var(--darkText) !important;
    }

    /* =========================
       The Pad / Frogs
    ========================== */
    .thePad{
      border-radius: 5px;
      padding: 4px;
      background-color: var(--brand);
    }

    .frogPanel{
      display: inline-block !important;
      image-rendering: pixelated;
      text-align: center;
      border: 1px solid var(--brand);
      border-radius: 5px;
      padding: 10px;
      padding-top: 0px;
      padding-bottom: 0px;
      margin: 2px;
      background-color: var(--brand);
    }

    .smallContainer2{
      border-radius: 5px;
      overflow: hidden;
      background-color: transparent;
      width: 128px;
      padding: 0px !important;
      height: 128px !important;
      display: inline-block !important;
      position: relative;
      image-rendering: pixelated;
    }

    .frogImg2{
      transition: transform .2s;
      display: block;
      image-rendering: pixelated;
      overflow: hidden;
      position: absolute;
      width: 128px;
      height: 128px;
      border-radius: 5px;
    }

    .frogImg2:hover{
      transform: scale(1.5);
      box-shadow: none;
      border: none;
    }

    .attributeList{
      border: 1px solid white;
      border-radius: 5px;
      padding: 4px;
      overflow: hidden;
      background-color: white;
      color: var(--darkText);
      box-shadow: 3px 3px var(--shadow);
      margin: 8px 0 12px;
      text-align: left;
      font-size: 13px;
      line-height: 1.25;
    }

    .trait{
      border-radius: 2px;
      background: white;
      color: rgba(126, 183, 128, 1);
      font-size: x-small;
      padding: 1px;
    }

    /* =========================
       Timeline
    ========================== */
    .divTimeline{
      width: 300px;
      margin: auto;
    }

    .pTimeline{
      border-top: 2px dashed;
      border-color: white !important;
      margin: 0;
      padding: 30px;
    }

    .pTimeline:nth-child(even){
      border-left: 2px dashed;
      border-top-left-radius: 30px;
      border-bottom-left-radius: 30px;
      margin-right: 30px;
      padding-right: 0;
    }

    .pTimeline:nth-child(odd){
      border-right: 2px dashed;
      border-top-right-radius: 30px;
      border-bottom-right-radius: 30px;
      margin-left: 30px;
      padding-left: 0;
    }

    .pTimeline:first-child{
      border-top: 0;
      border-top-right-radius: 0;
      border-top-left-radius: 0;
    }

    .pTimeline:last-child{
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }

    /* =========================
       Social icons
    ========================== */
    .headLineImg{
      float: none;
      image-rendering: crisp-edges;
      height: 32px;
      vertical-align: top;
      border-radius: 100%;
      padding: 0px;
      transition: transform .2s;
      margin: 3%;
      box-shadow: 3px 3px var(--shadow);
    }
    .headLineImg:hover{
      transform: scale(1.5);
      box-shadow: none;
      border: none;
    }
  </style>
</head>

<body class="bodyb">
  <div class="wrapper">

    <header>
      <div class="downloads pre">
        <div id="mintingTray">
          <ul class="downloads2">
            <li>
              <a id="mintTransact" href="https://freshfrogs.github.io/" class="pointer">
                <strong>LINK WALLET</strong>
              </a>
            </li>
            <li>
              <a id="mintTotal"><strong>0 ŒûETH</strong>Plus gas</a>
            </li>
            <li>
              <a class="pointer">
                <strong>
                  <b id="removeFrog" class="pointer">‚àí</b>
                  <span id="frogQuant">  1  </span>
                  <b id="addFrog" class="pointer">+</b>
                </strong>
                Quantity
              </a>
            </li>
          </ul>

          <div class="bigContainer">
            <div id="frogContainer" class="containerMint"></div>
            <div id="frogContainer2" class="containerMint"></div>
            <div id="frogContainer3" class="containerMint">
              <div class="imgWrapperMint">
                <img id="previewImg" class="frogImgMint" src="https://freshfrogs.github.io/assets/frogs/preview2.gif" alt="Preview" />
              </div>
            </div>
          </div>

          <h3 class="headerDiv" id="supply">FROG 4,040 Total Supply</h3>
        </div>
      </div>
    </header>

    <section>
      <div class="top">
        {{ content }}
        <h2 style="color: white !important;"><b>freshfrogs.github.io</b></h2>
      </div>

      <div class="downloads pre">
        <div id="netStatus" style="color: white;">
          <br>
          Please connect an Ethereum wallet...
          <b><a class="pointer" href="https://freshfrogs.github.io/">Connect Wallet</a></b>
          <hr class="hr2">Don't have a wallet?...
          <b><a class="pointer" href="https://metamask.io/download/" target="_blank">Download MetaMask ü¶ä</a></b>
          <hr class="hr2">Exclusive content for FROG holders!
          <a class="pointer" href="https://freshfrogs.github.io/the-pad">üçÄ <b>freshfrogs/the-pad</b> ‚ÜóÔ∏è</a>
        </div>

        <div id="pre" class="consoleOutput"></div>
        <div id="thePad" class="thePad"></div>

        <br>

        <div class="divTimeline">
          <img style="image-rendering: pixelated; margin: auto; border-radius: 10px; display: block; width: 256px"
               src="./assets/frogs/FLY.gif" alt="Fly" />

          <h3 class="headerDiv">What is Fresh Frogs NFT?</h3><br>

          <div class="pTimeline">
            <p>Fresh Frogs NFT is a collection of 4,040 randomly generated frogs that are each unique with thousands of different color combinations, traits, accessories, and more!</p>
            <b>Ethereum Blockchain</b>
            <a href="https://etherscan.io/token/0xbe4bef8735107db540de269ff82c7de9ef68c51b">ERC-721 Standard 0xBE4B..C51b ‚ÜóÔ∏è</a>
            <hr class="hr2">

            <div class="headLine2" style="margin-left:auto;margin-right:auto;image-rendering:auto !important;margin-bottom:2%;">
              <a href="https://twitter.com/FreshFrogs_NFT" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/twitter.png" alt="Twitter">
              </a>
              <a href="https://discord.gg/t84NyjpS3H" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/discord.png" alt="Discord">
              </a>
              <a href="https://opensea.io/collection/fresh-frogs" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/opensea.png" alt="OpenSea">
              </a>
              <a href="https://nftcalendar.io/event/fresh-frogs-nft-collection-release/" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/nftCalendar.png" alt="NFT Calendar">
              </a>
              <a href="https://nftdroops.com/nft/fresh-frogs/" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/droops2.png" alt="Droops">
              </a>
              <a href="https://rarible.com/fresh-frogs/" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/Rarible.png" alt="Rarible">
              </a>
              <a href="https://etherscan.io/token/0xbe4bef8735107db540de269ff82c7de9ef68c51b" target="_blank" style="display:inline !important;">
                <img class="headLineImg" src="./assets/etherScan.png" alt="Etherscan">
              </a>
            </div>
          </div>

          <div class="pTimeline">
            <p>
              Unbelievably, over 200,000 acres of rainforest are burned every day. That is over 150 acres lost every minute of every day, and 78 million acres are lost every year!
              A portion of every sale will be donated to
              <a style="display:inline !important;" class="pointer" href="https://rainforestfoundation.org/" target="_blank">The Rainforest Foundation</a>
            </p>
          </div>

          <div class="pTimeline">
            <h3 class="headerDiv">Frog Token Combinations!</h3><br>
            <img style="image-rendering: pixelated; margin: auto; border-radius: 10px; display: block; width: 256px"
                 src="./assets/frogs/previewMorph5.png" alt="Morph Preview"><br>
            <p>
              After the full collection of <b>4,040 Frogs</b> has been minted, Frog holders will be able to "Morph" their Frogs into a new NFT on Ethereum, combining their attributes and traits!
            </p>
            <p>
              Owners can try out this feature at
              <a class="pointer" href="https://freshfrogs.github.io/the-pad">üçÄ <b>freshfrogs/the-pad</b> ‚ÜóÔ∏è</a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <footer>
      ¬© Copyright. All Rights Reserved
    </footer>
  </div>

  <script src="{{ '/assets/js/scale.fix.js' | relative_url }}"></script>

  <script>
    (function () {
      // =========================
      // Config
      // =========================
      const CONTRACT_ADDRESS = "0xBE4Bef8735107db540De269FF82c7dE9ef68C51b";
      const NETWORK = "main";

      // NOTE: this is still client-side (not secure). Keep if you want it, but it can be abused.
      const OPENSEA_API_KEY = "48ffee972fc245fa965ecfe902b02ab4";

      // =========================
      // State
      // =========================
      let web3;
      let f0;
      let userAcc = null;
      let addressCut = "";
      let userInviteList = null;
      let userInviteKeys = [];
      let userInvite = "0x0000000000000000000000000000000000000000000000000000000000000000";

      let name = "";
      let symbol = "";
      let nextIdC = 0;

      let mint = 1;       // 1 = on, 0 = off
      let frogCount = 1;
      let mintPrice = 0;
      let mintLimit = 0;

      // =========================
      // Helpers (DOM)
      // =========================
      function $(id){ return document.getElementById(id); }

      function consoleOutput(output) {
        const pre = $("pre");
        if (!pre) return;
        const newLine = document.createElement("div");
        newLine.innerHTML = output;
        pre.appendChild(newLine);
      }

      function setStatus(html){
        const el = $("netStatus");
        if (el) el.innerHTML = html;
      }

      // =========================
      // Rendering
      // =========================
      function loadFreshFrog(tokenID) {
        const thePad = $("thePad");
        if (!thePad) return;

        const newFrog = document.createElement("div");
        const newFrog_href = "https://opensea.io/assets/0xbe4bef8735107db540de269ff82c7de9ef68c51b/" + tokenID;

        newFrog.id = tokenID;
        newFrog.className = "frogPanel";
        newFrog.innerHTML =
          '<a href="' + newFrog_href + '" target="_blank" class="smallContainer2 pointer" id="Frog #' + tokenID + '"></a>' +
          '<p class="attributeList" id="Frog #' + tokenID + 'Desc"></p>';

        thePad.appendChild(newFrog);
      }

      function loadAttribute(trait, attribute, whereId) {
        const where = document.getElementById(whereId);
        if (!where) return;

        const img = document.createElement("img");
        img.id = attribute;
        img.className = "frogImg2";
        img.style.cursor = "pointer";
        img.alt = attribute;

        // Prefer gifs for certain traits
        if (attribute === "smoking2" || attribute === "smokingPipe2" || attribute === "smokingCigar2") {
          img.src = "https://freshfrogs.github.io/the-pad/" + trait + "/" + attribute + ".gif";
        } else if (attribute === "morphAnimation") {
          img.src = "https://freshfrogs.github.io/the-pad/Frog/loadMorph.gif";
        } else if (attribute === "shadesAnimation") {
          img.src = "https://freshfrogs.github.io/the-pad/Eyes/shadesAnimation.gif";
        } else {
          img.src = "https://freshfrogs.github.io/the-pad/" + trait + "/" + attribute + ".png";
        }

        img.addEventListener("click", () => {
          const url =
            "https://opensea.io/collection/fresh-frogs?search[sortAscending]=true&search[sortBy]=PRICE&search[stringTraits][0][name]=" +
            encodeURIComponent(trait) +
            "&search[stringTraits][0][values][0]=" +
            encodeURIComponent(attribute);
          window.open(url, "_blank");
        });

        where.appendChild(img);
      }

      // =========================
      // OpenSea (recent nfts)
      // =========================
      async function fetchRecentNftsAndRender() {
        try {
          console.log("attempting to fetch opensea nft data...");

          const url =
            "https://api.opensea.io/api/v2/chain/ethereum/contract/" +
            CONTRACT_ADDRESS +
            "/nfts?limit=3&include_orders=false";

          const res = await fetch(url, {
            method: "GET",
            headers: {
              "Accept": "application/json",
              "X-API-KEY": OPENSEA_API_KEY
            }
          });

          const data = await res.json();
          const nfts = (data && data.nfts) ? data.nfts : [];
          if (!nfts.length) return;

          // Best-effort: derive next token from first returned name "Frog #123"
          const firstName = nfts[0].name || "";
          const firstNum = parseInt(firstName.replace("Frog #", ""), 10);
          const nextIdGuess = Number.isFinite(firstNum) ? (firstNum + 1) : null;

          if (nextIdGuess) {
            $("supply").innerHTML = "FROG # " + nextIdGuess + " / 4,040";
            $("previewImg").setAttribute("src", "https://freshfrogs.github.io/frog/" + nextIdGuess + ".png");
          }

          for (const frog of nfts) {
            const tokenStr =
              (frog.identifier != null && frog.identifier !== "")
                ? String(frog.identifier)
                : String((frog.name || "").replace("Frog #", ""));

            if (!tokenStr) continue;

            loadFreshFrog(tokenStr);

            const openSeaLink =
              "https://opensea.io/assets/0xbe4bef8735107db540de269ff82c7de9ef68c51b/" + tokenStr;

            const descEl = document.getElementById("Frog #" + tokenStr + "Desc");
            if (descEl) {
              const displayName = frog.name || ("Frog #" + tokenStr);
              descEl.innerHTML =
                '<a href="' + openSeaLink + '" target="_blank" style="image-rendering:auto !important; display:inline !important;">' +
                "<b><u>" + displayName + "</u></b>" +
                "</a>";
            }

            // Optional: if you have local metadata jsons, this will render trait icons + text.
            // If you DON'T have these files, it will just skip quietly.
            try {
              const metaRes = await fetch("https://freshfrogs.github.io/frog/json/" + tokenStr + ".json");
              if (!metaRes.ok) continue;
              const metadata = await metaRes.json();
              if (!metadata || !Array.isArray(metadata.attributes)) continue;

              for (const attr of metadata.attributes) {
                const trait_type = attr.trait_type;
                const value = attr.value;
                if (!trait_type || !value) continue;

                loadAttribute(trait_type, value, "Frog #" + tokenStr);

                const row = document.createElement("div");
                row.innerHTML = String(value);
                descEl && descEl.appendChild(document.createElement("br"));
                descEl && descEl.appendChild(row);
              }
            } catch (_) {
              // ignore metadata errors
            }
          }
        } catch (e) {
          console.log("failed to fetch opensea nft data -- \n" + (e && e.message ? e.message : e));
        }
      }

      // =========================
      // Invites / mint config
      // =========================
      async function getInvites() {
        // Look at first five invite keys
        for (let i = 0; i < 5; i++) {
          const thisInvite = userInviteKeys[i];
          if (!thisInvite) continue;

          if (thisInvite === "0x46f56367ce702cf6b8211e005810da01d9734dc9f0fbe8f41154180a97e57c8d_1") {
            // NF7UOS / C7AR bypass
            const a = (userAcc || "").toLowerCase();
            if (
              a === "0x97648bb89f2c5335fdece9edeebb8d88fa3d0a38" ||
              a === "0xf01e067d442f4254cd7c89a5d42d90ad554616e8"
            ) {
              userInvite = "0xf9498205c3ece7b7c81e254d31ab908b42df1a0fddf1a7d985b6a0d194dc97d4";
              break;
            } else {
              break;
            }
          }
        }

        // Update price/limit UI
        try {
          mintPrice = JSON.stringify(userInviteList[userInvite].condition.converted.eth);
          mintLimit = JSON.stringify(userInviteList[userInvite].condition.converted.limit);
          $("mintTotal").innerHTML = "<strong>" + mintPrice + " ŒûETH</strong>plus gas";
        } catch (_) {
          // ignore if invite not found
        }
      }

      // =========================
      // Wallet connect + init
      // =========================
      async function initWeb3AndContract() {
        if (!window.ethereum) {
          setStatus(
            "<br><b>No Ethereum wallet detected.</b><br>" +
            "Install MetaMask: <a class='pointer' href='https://metamask.io/download/' target='_blank'><b><u>Download MetaMask ü¶ä</u></b></a>"
          );
          return;
        }

        web3 = new Web3(window.ethereum);
        f0 = new F0();

        // Request accounts (modern MetaMask)
        try {
          await window.ethereum.request({ method: "eth_requestAccounts" });
        } catch (e) {
          consoleOutput("<div class='mintingTextRed'>Wallet connection was rejected.</div>");
          return;
        }

        // Init Factoria
        try {
          await f0.init({
            web3: web3,
            contract: CONTRACT_ADDRESS,
            network: NETWORK
          });

          userAcc = (await web3.currentProvider.selectedAddress) || null;
          if (!userAcc) {
            const accounts = await web3.eth.getAccounts();
            userAcc = accounts && accounts[0] ? accounts[0] : null;
          }

          addressCut = userAcc ? (userAcc.substring(0, 5) + "..." + userAcc.slice(-4)) : "";
          userInviteList = await f0.myInvites();
          userInviteKeys = Object.keys(userInviteList || {});

          name = await f0.api.name().call();
          symbol = await f0.api.symbol().call();
          const nextId = await f0.api.nextId().call();
          nextIdC = parseInt(nextId, 10);

          userInvite = "0x0000000000000000000000000000000000000000000000000000000000000000";
          await getInvites();

          console.log("Wallet Connected! " + userAcc);
          console.log("Contract Connected! " + name + " | " + symbol);

          $("netStatus").innerHTML = "";
          $("supply").innerHTML = "FROG # " + nextIdC + " / 4,040";
          $("previewImg").setAttribute("src", "https://freshfrogs.github.io/frog/" + nextIdC + ".png");

          // Button setup
          $("mintTransact").innerHTML = "<strong>‚òõMINT</strong><u>" + frogCount + " FROG(s)</u>";
          $("mintTransact").removeAttribute("href");

          consoleOutput(
            "<div id='mintingText'>Please connect an Ethereum wallet... <b><i>" + addressCut + " ‚úì</b></i>" +
            "<br><b>FROG #" + nextIdC + "</b> available to mint... Limit: <b>" + mintLimit + " Frogs</b> per Wallet</div>"
          );
          consoleOutput('<br><hr class="hr2">Exclusive content for FROG holders! <a class="pointer" href="https://freshfrogs.github.io/the-pad">üçÄ <b>freshfrogs.github.io/the-pad</b> ‚ÜóÔ∏è</a>');
        } catch (e) {
          consoleOutput(
            "<br><div class='mintingTextRed'>Error Linking Wallet: <br><b>''</b>" +
            (e && e.message ? e.message : e) +
            "<b>''</b> <a href='https://discord.gg/xWMFWgpvd3' target='_blank' class='pointer'><b><u>Discord #Support</u></b></a></div>"
          );
          return;
        }
      }

      // =========================
      // Mint interactions
      // =========================
      function updateMintUI() {
        $("frogQuant").innerHTML = "  " + frogCount + "  ";
        $("mintTransact").innerHTML = "<strong>‚òõMINT</strong><u>" + frogCount + " FROG(s)</u>";
        $("mintTotal").innerHTML = "<strong>" + (frogCount * mintPrice) + " ŒûETH</strong>plus gas";

        let mintList = nextIdC;
        if (frogCount > 1) mintList = nextIdC + " - " + ((nextIdC - 1) + frogCount);
        $("supply").innerHTML = "FROG(s) # " + mintList;
      }

      function addFrogToTray() {
        if (frogCount === 9) return;

        const make = (containerId) => {
          const newFrog = document.createElement("div");
          newFrog.className = "imgWrapperMint";
          newFrog.innerHTML =
            "<img class='frogImgMint' src='https://freshfrogs.github.io/frog/" + (nextIdC + frogCount) + ".png' alt='Frog' />";
          $(containerId).appendChild(newFrog);
        };

        if (frogCount <= 2) make("frogContainer3");
        else if (frogCount <= 5) make("frogContainer2");
        else make("frogContainer");

        frogCount += 1;
        updateMintUI();
      }

      function removeFrogFromTray() {
        const removeLast = (containerId) => {
          const el = $(containerId);
          if (el && el.lastChild) el.removeChild(el.lastChild);
        };

        if (frogCount >= 7) removeLast("frogContainer");
        else if (frogCount >= 4) removeLast("frogContainer2");
        else if (frogCount >= 2) removeLast("frogContainer3");

        frogCount = Math.max(1, frogCount - 1);
        updateMintUI();
      }

      async function mintNow() {
        if (mint === 0 || nextIdC >= 3021) {
          consoleOutput("<div class='mintingTextRed'><b>Mint Open 04/22/22 8:00 PM (UTC)</b> <b><u><a class='pointer' target='_blank' href='https://discord.gg/xWMFWgpvd3'>Join Discord!</a></u></b></div>");
          return;
        }

        const mintingTextEl = document.getElementById("mintingText");
        if (mintingTextEl) {
          mintingTextEl.innerHTML =
            "<strong>Minting (" + frogCount + ") FROG Tokens...</strong><br>\n" +
            "Please sign the transaction and wait...<br>\n" +
            "Do not leave or refresh the page!";
          mintingTextEl.className = "mintingTextWhite";
        }

        try {
          await f0.mint(userInvite, frogCount);
        } catch (e) {
          if (mintingTextEl) {
            mintingTextEl.innerHTML =
              "Something went wrong! <br><b>''</b>" +
              (e && e.message ? e.message : e) +
              "<b>''</b> <a href='https://discord.gg/xWMFWgpvd3' target='_blank' class='pointer'><b><u>Discord #Support</u></b></a>";
            mintingTextEl.className = "mintingTextRed";
          }
          return;
        }

        if (mintingTextEl) {
          mintingTextEl.innerHTML =
            "<br><div class='mintingText'><h3>Congratulations!</h3> <b>" + frogCount +
            " FROG(s)</b> have successfully been minted! <a class='pointer' href='https://freshfrogs.github.io/the-pad'><b>View 'FROG' Tokens</b></a></div><br>";
          mintingTextEl.className = "mintingTextGreen";
        }
      }

      // =========================
      // Boot
      // =========================
      document.addEventListener("DOMContentLoaded", async () => {
        // Fetch recent NFTs (best-effort, does not require wallet)
        fetchRecentNftsAndRender();

        // Init wallet/contract + wire UI
        await initWeb3AndContract();

        // Wire listeners
        const mintBtn = document.querySelector("#mintTransact");
        if (mintBtn) mintBtn.addEventListener("click", (e) => { e.preventDefault(); mintNow(); });

        const addBtn = document.querySelector("#addFrog");
        if (addBtn) addBtn.addEventListener("click", (e) => { e.preventDefault(); addFrogToTray(); });

        const removeBtn = document.querySelector("#removeFrog");
        if (removeBtn) removeBtn.addEventListener("click", (e) => { e.preventDefault(); removeFrogFromTray(); });

        // Initial UI
        updateMintUI();
      });
    })();
  </script>
</body>
</html>